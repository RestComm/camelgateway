<?xml version="1.0" encoding="UTF-8"?>
<deployment xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns="urn:jboss:bean-deployer:2.0">


	<bean name="SCTPManagement" class="org.mobicents.protocols.sctp.ManagementImpl">
		<constructor>
			<parameter>SCTPManagement</parameter>
		</constructor>
		<property name="persistDir">${smsc.data.dir}</property>
	</bean>
	
	<bean name="SCTPShellExecutor" class="org.mobicents.protocols.ss7.m3ua.impl.oam.SCTPShellExecutor">
		<property name="sctpManagements">
			<map keyClass="java.lang.String" valueClass="org.mobicents.protocols.sctp.ManagementImpl">
				<entry>
					<key>SCTPManagement</key>
					<value>
						<inject bean="SCTPManagement" />
					</value>
				</entry>
			</map>
		</property>
	</bean>		

	<!-- ==================================================================== -->
	<!-- M3UA -->
	<!-- M3UAManagement is managing the m3ua side commands -->
	<!-- ==================================================================== -->
	<!-- -->
	<bean name="RoutingLabelFormat" class="org.mobicents.protocols.ss7.mtp.RoutingLabelFormat">
		<constructor factoryClass="org.mobicents.protocols.ss7.mtp.RoutingLabelFormat"
			factoryMethod="getInstance">
			<parameter>ITU</parameter>
		</constructor>
	</bean>
		
	<bean name="Mtp3UserPart" class="org.mobicents.protocols.ss7.m3ua.impl.M3UAManagementImpl">
		<constructor>
			<parameter>Mtp3UserPart</parameter>
			<parameter>Restcomm-CAMEL</parameter>
		</constructor>
		<property name="persistDir">${smsc.data.dir}</property>
		<property name="transportManagement">
			<inject bean="SCTPManagement" />
		</property>
		<property name="routingLabelFormat">
			<inject bean="RoutingLabelFormat" />
		</property>		
	</bean>

	<bean name="M3UAShellExecutor" class="org.mobicents.protocols.ss7.m3ua.impl.oam.M3UAShellExecutor">
		<property name="m3uaManagements">
			<map keyClass="java.lang.String" valueClass="org.mobicents.protocols.ss7.m3ua.impl.M3UAManagementImpl">
				<entry>
					<key>Mtp3UserPart</key>
					<value>
						<inject bean="Mtp3UserPart" />
					</value>
				</entry>
			</map>
		</property>
	</bean>
	
	<!-- ==================================================================== -->
	<!-- Scheduler -->
	<!-- Scheduler for ss7 stack -->
	<!-- ==================================================================== -->
	<!-- -->
	<bean name="SS7Clock" class="org.mobicents.protocols.ss7.scheduler.DefaultClock">
	</bean>

	<bean name="SS7Scheduler" class="org.mobicents.protocols.ss7.scheduler.Scheduler">
		<property name="clock">
			<inject bean="SS7Clock" />
		</property>
	</bean>	

	<!-- ==================================================================== -->
	<!-- Dialogic Mtp3UserPart -->
	<!-- ==================================================================== -->
	<!-- <bean name="Mtp3UserPart" class="org.mobicents.ss7.hardware.dialogic.DialogicMtp3UserPart"> 
		<property name="sourceModuleId">61</property> <property name="destinationModuleId">34</property> 
		</bean> -->

	<!-- ==================================================================== -->
	<!-- SCCP Service -->
	<!-- ==================================================================== -->
	<bean name="SccpStack" class="org.mobicents.protocols.ss7.sccp.impl.SccpStackImpl">
		<constructor>
			<parameter>SccpStack</parameter>
		</constructor>
		<property name="persistDir">${smsc.data.dir}</property>
		<property name="mtp3UserParts">
			<map keyClass="java.lang.Integer" valueClass="org.mobicents.protocols.ss7.mtp.Mtp3UserPart">
				<entry>
					<key>1</key>
					<value>
						<inject bean="Mtp3UserPart" />
					</value>
				</entry>
			</map>
		</property>
	</bean>

	<bean name="SccpExecutor" class="org.mobicents.protocols.ss7.sccp.impl.oam.SccpExecutor">
		<property name="sccpStacks">
			<map keyClass="java.lang.String" valueClass="org.mobicents.protocols.ss7.sccp.impl.SccpStackImpl">
				<entry>
					<key>SccpStack</key>
					<value>
						<inject bean="SccpStack" />
					</value>
				</entry>
			</map>		
		</property>
	</bean>

</deployment>
